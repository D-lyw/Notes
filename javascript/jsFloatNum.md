# Js 浮点数问题

> js中可能会遇到的问题 `0.1 + 0.2 = 0.30000000000000004`, `1-0.9=0.09999999999999998`,

## js中数据的存储

和其他语言不同, JavaScript 中所有数字包括整数和小数都只有一种类型-**Number**. 它的实现遵循IEEE754标准, 使用64位固定长度来表示, 也就是标准的double双精度浮点数

这样的存储结构优点是可以归一化处理整数和小数，节省存储空间。

64位比特又可分为三个部分：

+ 符号位S：第 1 位是正负数符号位（sign），0代表正数，1代表负数
+ 指数位E：中间的 11 位存储指数（exponent），用来表示次方数
+ 尾数位M：最后的 52 位是尾数（mantissa），超出的部分自动进一舍零

![浮点数结构](../img/IEEE754Double.png)

公式为:

![公式表示](../img/IEEE754公式.png)


```js

Math.pow(2, 1023)
> 8.98846567431158e+307
Math.pow(2, 1024)
> Infinty

Number.MAX_VALUE
> 1.7976931348623157e+308

Math.pow(2, 1023) * 1.999999999999999
> 1.797693134862315e+308


Number.MAX_VALUE === ((1- Math.pow(2, -52)) + 1) * Math.pow(2, 1023)
> true

```


## 最大的安全数



## 相关链接

+ [JavaScript 浮点数陷阱及解法](https://github.com/camsong/blog/issues/9)
